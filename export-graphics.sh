#!/bin/bash

# Script to export all graphics from Nextcloud Talk Android for redesign
# –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ–π –≥—Ä–∞—Ñ–∏–∫–∏ –∏–∑ Nextcloud Talk Android –¥–ª—è —Ä–µ–¥–∏–∑–∞–π–Ω–∞

set -e

echo "üé® –≠–∫—Å–ø–æ—Ä—Ç –≥—Ä–∞—Ñ–∏–∫–∏ –¥–ª—è –¥–∏–∑–∞–π–Ω–µ—Ä–∞ DreamTheme"
echo "=============================================="

# –¶–≤–µ—Ç–∞
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m'

function print_step() {
    echo -e "${BLUE}[INFO]${NC} $1"
}

function print_success() {
    echo -e "${GREEN}[SUCCESS]${NC} $1"
}

# –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
EXPORT_DIR="graphics-for-designer"
mkdir -p "$EXPORT_DIR"

print_step "–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫..."
mkdir -p "$EXPORT_DIR"/{icons,splash,drawables,vectors,logos,screenshots}

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏–∫–æ–Ω–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
print_step "–≠–∫—Å–ø–æ—Ä—Ç –∏–∫–æ–Ω–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
find app/src -name "ic_launcher*" -type f -exec cp {} "$EXPORT_DIR/icons/" \;
find app/src -name "launcher_*" -type f -exec cp {} "$EXPORT_DIR/icons/" \;

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º drawable —Ä–µ—Å—É—Ä—Å—ã
print_step "–≠–∫—Å–ø–æ—Ä—Ç drawable —Ä–µ—Å—É—Ä—Å–æ–≤..."
find app/src -path "*/drawable*/*" -type f \( -name "*.png" -o -name "*.jpg" -o -name "*.svg" -o -name "*.xml" \) -exec cp {} "$EXPORT_DIR/drawables/" \;

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
print_step "–≠–∫—Å–ø–æ—Ä—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤..."
find drawable_resources -name "*.svg" -type f -exec cp {} "$EXPORT_DIR/vectors/" \;

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º mipmap —Ä–µ—Å—É—Ä—Å—ã (–∏–∫–æ–Ω–∫–∏ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤)
print_step "–≠–∫—Å–ø–æ—Ä—Ç mipmap —Ä–µ—Å—É—Ä—Å–æ–≤..."
find app/src -path "*/mipmap*/*" -type f -exec cp {} "$EXPORT_DIR/icons/" \;

# –°–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
print_step "–°–æ–∑–¥–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤..."
cat > "$EXPORT_DIR/README.md" << 'EOF'
# –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã Nextcloud Talk Android

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞

### üì± /icons/
–ò–∫–æ–Ω–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —ç–∫—Ä–∞–Ω–æ–≤:
- `ic_launcher.xml` - –æ—Å–Ω–æ–≤–Ω–∞—è –∏–∫–æ–Ω–∫–∞ (–≤–µ–∫—Ç–æ—Ä–Ω–∞—è)
- `ic_launcher_foreground.xml` - –ø–µ—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω –∏–∫–æ–Ω–∫–∏
- `ic_launcher_background.xml` - —Ñ–æ–Ω –∏–∫–æ–Ω–∫–∏
- –†–∞—Å—Ç—Ä–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (mdpi, hdpi, xhdpi, xxhdpi, xxxhdpi)

### üé® /drawables/
Drawable —Ä–µ—Å—É—Ä—Å—ã (–∫–Ω–æ–ø–∫–∏, —Ñ–æ–Ω—ã, –∏–∫–æ–Ω–∫–∏):
- –í–µ–∫—Ç–æ—Ä–Ω—ã–µ drawable (XML)
- –†–∞—Å—Ç—Ä–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (PNG, JPG)
- State-dependent drawables

### üìê /vectors/
–ò—Å—Ö–æ–¥–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã (SVG):
- `icon-foreground.svg` - –∏—Å—Ö–æ–¥–Ω–∏–∫ –ø–µ—Ä–µ–¥–Ω–µ–≥–æ –ø–ª–∞–Ω–∞ –∏–∫–æ–Ω–∫–∏
- `icon-background.svg` - –∏—Å—Ö–æ–¥–Ω–∏–∫ —Ñ–æ–Ω–∞ –∏–∫–æ–Ω–∫–∏

### üñºÔ∏è /logos/
–õ–æ–≥–æ—Ç–∏–ø—ã –∏ –±—Ä–µ–Ω–¥–∏–Ω–≥

### üì± /screenshots/
–°–∫—Ä–∏–Ω—à–æ—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞

## üéØ –ó–∞–¥–∞—á–∏ –¥–ª—è –¥–∏–∑–∞–π–Ω–µ—Ä–∞

### –û—Å–Ω–æ–≤–Ω–∞—è –∏–∫–æ–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –ù–æ–≤–∞—è –∏–∫–æ–Ω–∫–∞ –≤ —Å—Ç–∏–ª–µ DreamTheme
- [ ] Adaptive icon (–ø–µ—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω + —Ñ–æ–Ω)
- [ ] –í—Å–µ —Ä–∞–∑–º–µ—Ä—ã: 48dp, 72dp, 96dp, 144dp, 192dp
- [ ] –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞: #6366F1 (–æ—Å–Ω–æ–≤–Ω–æ–π), #8B5CF6 (–∞–∫—Ü–µ–Ω—Ç)

### Splash screen
- [ ] –ó–∞—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–∫–æ–Ω–∫–∞ (Lottie)
- [ ] –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Android 12+ Splash Screen API

### UI –∏–∫–æ–Ω–∫–∏
- [ ] –ò–∫–æ–Ω–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞
- [ ] –°—Ç–∏–ª—å: –º–∏–Ω–∏–º–∞–ª–∏–∑–º, —á–µ—Ç–∫–∏–µ –ª–∏–Ω–∏–∏
- [ ] –†–∞–∑–º–µ—Ä—ã: 24dp, 32dp (–æ—Å–Ω–æ–≤–Ω—ã–µ)
- [ ] –¢–µ–º–Ω–∞—è –∏ —Å–≤–µ—Ç–ª–∞—è –≤–µ—Ä—Å–∏–∏

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- [ ] –§–∞–≤–∏–∫–æ–Ω –¥–ª—è –≤–µ–±-–≤–µ—Ä—Å–∏–∏
- [ ] –ò–∫–æ–Ω–∫–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –ë—Ä–µ–Ω–¥–∏–Ω–≥ –¥–ª—è —ç–∫—Ä–∞–Ω–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–∫

## üìè –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –§–æ—Ä–º–∞—Ç—ã
- **–ò–∫–æ–Ω–∫–∏**: SVG (–∏—Å—Ö–æ–¥–Ω–∏–∫–∏) + PNG (—ç–∫—Å–ø–æ—Ä—Ç)
- **–í–µ–∫—Ç–æ—Ä—ã**: SVG
- **–†–∞—Å—Ç—Ä**: PNG (—Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é), JPG (–±–µ–∑ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏)

### –†–∞–∑–º–µ—Ä—ã –∏–∫–æ–Ω–æ–∫ Android
- **mdpi**: 48x48px (–±–∞–∑–æ–≤—ã–π)
- **hdpi**: 72x72px (1.5x)
- **xhdpi**: 96x96px (2x)
- **xxhdpi**: 144x144px (3x)
- **xxxhdpi**: 192x192px (4x)

### –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ DreamTheme
```
#6366F1 - –û—Å–Ω–æ–≤–Ω–æ–π (Indigo)
#8B5CF6 - –ê–∫—Ü–µ–Ω—Ç (Purple)
#06B6D4 - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π (Cyan)
#F8FAFC - –§–æ–Ω —Å–≤–µ—Ç–ª—ã–π
#1E293B - –¢–µ–∫—Å—Ç —Ç–µ–º–Ω—ã–π
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∑–∞–º–µ–Ω—ã

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:
- [ ] `ic_launcher.xml`
- [ ] `ic_launcher_foreground.xml` 
- [ ] `ic_launcher_background.xml`
- [ ] `ic_launcher.png` (–≤—Å–µ —Ä–∞–∑–º–µ—Ä—ã)
- [ ] `ic_launcher_round.png` (–≤—Å–µ —Ä–∞–∑–º–µ—Ä—ã)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∫–æ–Ω–∫–∏:
- [ ] –ò–∫–æ–Ω–∫–∏ –º–µ–Ω—é –∏ –¥–µ–π—Å—Ç–≤–∏–π
- [ ] –ò–∫–æ–Ω–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤
- [ ] –§–æ–Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

## üöÄ –ü–æ—Å–ª–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

1. –ü–æ–º–µ—Å—Ç–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
2. –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã strings.xml —Å –Ω–æ–≤—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º
3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

EOF

# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å —ç–º—É–ª—è—Ç–æ—Ä)
if command -v adb &> /dev/null; then
    print_step "–ü–æ–ø—ã—Ç–∫–∞ —Å–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
    if adb devices | grep -q "device$"; then
        adb shell screencap -p > "$EXPORT_DIR/screenshots/current_app_$(date +%Y%m%d_%H%M).png" 2>/dev/null || true
    fi
fi

# –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
ICON_COUNT=$(find "$EXPORT_DIR/icons" -type f | wc -l)
DRAWABLE_COUNT=$(find "$EXPORT_DIR/drawables" -type f | wc -l)
VECTOR_COUNT=$(find "$EXPORT_DIR/vectors" -type f | wc -l)

print_success "–≠–∫—Å–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!"
echo ""
echo "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞:"
echo "   –ò–∫–æ–Ω–∫–∏: $ICON_COUNT —Ñ–∞–π–ª–æ–≤"
echo "   Drawables: $DRAWABLE_COUNT —Ñ–∞–π–ª–æ–≤"
echo "   –í–µ–∫—Ç–æ—Ä—ã: $VECTOR_COUNT —Ñ–∞–π–ª–æ–≤"
echo ""
echo "üìÅ –í—Å–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: $EXPORT_DIR/"
echo "üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –¥–∏–∑–∞–π–Ω–µ—Ä–∞: $EXPORT_DIR/README.md"
echo ""
print_success "–ì–æ—Ç–æ–≤–æ! –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∏–∑–∞–π–Ω–µ—Ä—É."
